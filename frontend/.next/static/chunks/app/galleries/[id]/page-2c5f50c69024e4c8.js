(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[835],{7226:function(e,t,s){Promise.resolve().then(s.bind(s,8731))},6463:function(e,t,s){"use strict";var a=s(1169);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},8731:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return r}});var a=s(7437),n=s(2265),i=s(6463),l=s(5482);function r(){let{id:e}=(0,i.useParams)()||{},[t,s]=(0,n.useState)([]),[r,c]=(0,n.useState)(0);(0,n.useEffect)(()=>{e&&(0,l.S)("/api/galleries/".concat(e,"/items")).then(e=>{let t=e.items||[];s(t),c(t.filter(e=>e.selectedByClient).length)})},[e]);let o=async e=>{let t=await (0,l.S)("/api/upload/select/".concat(e),{method:"POST"});s(s=>s.map(s=>s.id===e?{...s,selectedByClient:t.selected}:s)),c(e=>t.selected?e+1:e-1)};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h1",{className:"text-3xl font-display",children:"Galeria"}),(0,a.jsx)("div",{className:"fixed bottom-6 right-6",children:(0,a.jsxs)("button",{disabled:0===r,className:"px-5 py-3 rounded-2xl bg-accent text-white disabled:opacity-50",children:["Concluir sele\xe7\xe3o (",r,")"]})}),(0,a.jsxs)("div",{className:"grid gap-4 grid-cols-[repeat(auto-fill,minmax(220px,1fr))]",children:[t.map(e=>(0,a.jsxs)("div",{className:"relative cursor-pointer",onClick:()=>o(e.id),children:[(0,a.jsx)("img",{src:e.urlThumbnail,alt:"",className:"w-full h-auto rounded-xl shadow"}),e.selectedByClient&&(0,a.jsx)("div",{className:"absolute inset-0 bg-accent/40 rounded-xl"}),"video"===e.type&&(0,a.jsx)("span",{className:"absolute bottom-2 right-2 text-white text-xl",children:"\uD83C\uDFA5"})]},e.id)),0===t.length&&(0,a.jsx)("p",{children:"Sem itens nesta galeria."})]})]})}},5482:function(e,t,s){"use strict";async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=localStorage.getItem("token"),a={"Content-Type":"application/json",...s?{Authorization:"Bearer ".concat(s)}:{}},n=await fetch("http://localhost:4000"+e,{...t,headers:a});if(!n.ok)throw Error("Erro de API: ".concat(n.status));return n.json()}s.d(t,{S:function(){return a}})}},function(e){e.O(0,[971,23,744],function(){return e(e.s=7226)}),_N_E=e.O()}]);